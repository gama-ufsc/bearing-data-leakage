# @package _global_

defaults:
  - override /dataset/split_function@paderborn.split_function: proposed_optimization_4x1split
  - override /transform: time
  - override /modelmodule/model/backbone: wdcnn

lr: 1e-3
batch_size: 128

modelmodule:
  model:
    backbone:
      _target_: src.models.components.backbone.wdcnn.WDCNN
      in_channels: 1
      n_class: ${num_class}
      pretrained: ${pretrained}
      apply_dropout: True
      dropout_rate: ${dropout_rate}

paderborn:
  split_function:
    _target_: src.data.data_splits.train_test_split_proposed
    _partial_: True
    run: ${run}
    use_artificial: False

dropout_rate: 0.3
experiment: multilabel_4x1_RSRG_Real_Dropout${dropout_rate}_lr_${lr}_bs_${batch_size}_std${std}_seed_${run}
mode: rsrg_paderborn_tuning_4x1_dropout${dropout_rate}_std_${std}

seed: 0
random_state: 0
segment_length: 255000
overlap_pct: 0
run: 0

use_fixed_segments: True
deterministic: True

epochs: 30
std: 0.3
min_crop_size: 4096
crop_size: 16384

augmentations:
  pre_repr:
    train:
      _target_: torchvision.transforms.v2.Compose
      transforms:
        - _target_: src.data.transforms.augmentations.VariableRandomCrop1D
          min_crop_size: ${min_crop_size}
          max_crop_size: ${crop_size}
        - _target_: src.data.transforms.augmentations.CustomResample
          desired_shape: ${crop_size}
        - _target_: src.data.transforms.augmentations.RandomGainOnFFT
          mean: 1
          std: ${std}
    test:
      _target_: torchvision.transforms.v2.Compose
      transforms:
        - _target_: src.data.transforms.augmentations.CenterCrop1D
          crop_size: ${crop_size}
    validation:
      _target_: torchvision.transforms.v2.Compose
      transforms:
        - _target_: src.data.transforms.augmentations.CenterCrop1D
          crop_size: ${crop_size}
  post_repr: null

hydra:
  sweeper:
    params:
      dropout_rate: 0.9
      lr: 1e-3
      std: 0.3, 0.5, 0.7, 0.9
      batch_size: 64
      run: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19
